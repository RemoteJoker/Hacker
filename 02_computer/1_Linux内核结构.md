一.系统调用接口
-----
以X86架构的CPU举例:
该CPU包含两个权限级别:R3和R0，他们之间的联系部分为系统调用接口
具体如:用户调用write函数->内部调用syscall指令(X86)，触发软中断(int 0x80)->陷入内核
->内核处理(验证参数，执行操作)->返回用户空间
-----
系统调用表:一张调用号与处理函数的映射表
-----
系统调用在内核态，库函数调用在用户态；系统调用开销高，库函数开销低
-----
cat /usr/include/asm/unistd_4.h 查看调用号
strace -e trace=open,read ls 跟踪ls命令的open/read调用
-----
自定义系统调用
在源码中添加新系统调用
在sys_call_table种注册新条目
实现处理函数
-----
二.进程管理
-----
进程:拥有独立空间，文件描述符，信号处理，调用为fork
线程:轻量级进程，共享空间，但是有独立的栈和寄存器
-----
创建进程:fork()->sys_fork()->_do_fork()->copy_process()->wake_up_new_task()
-----
task_struct 进程结构体，关键数据
-----
创建线程:pthread_create()->clone()->sys_clone()->_do_fork()
-----
task_struct 线程结构体，关键数据
-----
三.内存管理
-----
虚拟地址空间=用户空间+内核空间
分页机制:MMU转换->大小为4KB
多级页表(4级):PGD->PUD->PMD->PTE
TLB:页表加速项
-----
物理内存管理
伙伴系统
SLAB|SLUB分配器
-----
malloc的实现:
小内存:通过brk扩展堆空间
大内存:通过mmap匿名映射
-----
四.文件系统
五.设备驱动
六.网络栈
七.内核模块
八.中断与异常处理
九.同步与并发机制
十.安全机制
